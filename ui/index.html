<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Phishing URL Detector</title>

<style>
    body {
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, #1c1f26, #2a2f3a);
        font-family: "Segoe UI", Arial, sans-serif;
        overflow: hidden;
    }

    /* Floating animation background circles */
    .bg-circle {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.06);
        filter: blur(20px);
        animation: float 10s infinite alternate ease-in-out;
    }
    .c1 { width: 180px; height: 180px; top: 5%; left: 10%; }
    .c2 { width: 250px; height: 250px; bottom: 10%; right: 12%; animation-delay: 2s; }
    .c3 { width: 140px; height: 140px; bottom: 20%; left: 15%; animation-delay: 4s; }

    @keyframes float {
        from { transform: translateY(0px); }
        to { transform: translateY(-40px); }
    }

    .container {
        width: 420px;
        padding: 35px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(12px);
        border-radius: 18px;
        box-shadow: 0 8px 35px rgba(0, 0, 0, 0.4);
        text-align: center;
        animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(25px); }
        to { opacity: 1; transform: translateY(0); }
    }

    h2 {
        color: #fff;
        font-size: 26px;
        font-weight: 600;
        margin-bottom: 20px;
    }

    input {
        width: 100%;
        padding: 12px;
        border-radius: 10px;
        border: none;
        outline: none;
        background: rgba(255, 255, 255, 0.15);
        color: white;
        font-size: 15px;
        transition: 0.3s;
    }

    input:focus {
        background: rgba(255, 255, 255, 0.25);
        transform: scale(1.02);
    }

    button {
        width: 100%;
        padding: 12px;
        margin-top: 15px;
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        border: none;
        border-radius: 10px;
        color: white;
        font-size: 17px;
        cursor: pointer;
        font-weight: 600;
        transition: 0.25s;
    }

    button:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.5);
    }

    #result {
        margin-top: 20px;
        padding: 16px;
        border-radius: 12px;
        font-size: 17px;
        font-weight: 600;
        opacity: 0;
        transform: translateY(10px);
        transition: 0.4s ease;
    }

    .show {
        opacity: 1 !important;
        transform: translateY(0px);
    }

    .safe {
        background: rgba(34, 197, 94, 0.15);
        border: 1px solid #22c55e;
        color: #22c55e;
        box-shadow: 0 0 12px rgba(34, 197, 94, 0.35);
    }

    .phishing {
        background: rgba(239, 68, 68, 0.15);
        border: 1px solid #ef4444;
        color: #ef4444;
        box-shadow: 0 0 12px rgba(239, 68, 68, 0.35);
    }

    /* Loader animation */
    .loader {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-top: 4px solid #3b82f6;
        border-radius: 50%;
        width: 28px;
        height: 28px;
        margin: 10px auto;
        animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

</style>
</head>

<body>

<!-- Floating background effects -->
<div class="bg-circle c1"></div>
<div class="bg-circle c2"></div>
<div class="bg-circle c3"></div>

<div class="container">
    <h2>üîç Phishing URL Detector</h2>

    <input type="text" id="url" placeholder="Enter a URL to check...">

    <button onclick="checkURL()">Check URL</button>

    <div id="result"></div>
</div>


<script>
function isValidURL(url) {
    const pattern = new RegExp(
        '^(https?:\\/\\/)?' +
        '((([a-zA-Z0-9\\-])+\\.)+[a-zA-Z]{2,})' +
        '(\\/[a-zA-Z0-9@:%._\\+~#=\\-]*)*$',
        'i'
    );
    return pattern.test(url);
}

async function checkURL() {
    const urlInput = document.getElementById("url").value.trim();
    const resultDiv = document.getElementById("result");

    resultDiv.className = "show";
    
    if (urlInput === "") {
        resultDiv.innerHTML = "‚ö†Ô∏è Please enter a URL";
        resultDiv.className = "phishing show";
        return;
    }

    if (!isValidURL(urlInput)) {
        resultDiv.innerHTML = "‚ö†Ô∏è Invalid URL format!";
        resultDiv.className = "phishing show";
        return;
    }

    // Show loader animation
    resultDiv.innerHTML = `<div class="loader"></div> Checking...`;
    resultDiv.className = "show";

    try {
        const response = await fetch("/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ url: urlInput })
        });

        const data = await response.json();

        // Invalid domain
        if (data.prediction === "invalid") {
            resultDiv.innerHTML = `‚ö†Ô∏è Invalid Domain<br><small>${data.reason}</small>`;
            resultDiv.className = "phishing show";
            return;
        }

        // Typosquatting detection
        if (data.reason === "Suspicious domain impersonation detected") {
            resultDiv.innerHTML = `
                üö® Typosquatting Detected!<br>
                <small>This URL imitates a trusted brand.</small><br>
                Probability: ${data.probability.toFixed(2)}
            `;
            resultDiv.className = "phishing show";
            return;
        }

        // ML phishing detection
        if (data.prediction === "phishing") {
            resultDiv.innerHTML = `
                üö® Phishing Detected!<br>
                Probability: ${data.probability.toFixed(2)}
            `;
            resultDiv.className = "phishing show";
        } else {
            resultDiv.innerHTML = `
                üü¢ Safe URL<br>
                Probability: ${data.probability.toFixed(2)}
            `;
            resultDiv.className = "safe show";
        }

    } catch (error) {
        resultDiv.innerHTML = "‚ùå Error connecting to API";
        resultDiv.className = "phishing show";
    }
}
</script>

</body>
</html>
